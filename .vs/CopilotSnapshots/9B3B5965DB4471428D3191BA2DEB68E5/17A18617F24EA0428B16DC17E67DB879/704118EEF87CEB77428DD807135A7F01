@page "/login"
@using BabyPOS_Web.ViewModels
@inject HttpClient Http

@code {
    private LoginViewModel vm;
    protected override void OnInitialized()
    {
        vm = new LoginViewModel(Http);
    }
}

<h3>Login</h3>
<div>
    <label>Username</label>
    <input @bind="vm.Username" />
</div>
<div>
    <label>Password</label>
    <input type="password" @bind="vm.Password" />
</div>
<button @onclick="OnLogin">Login</button>

<div style="margin-top:12px">
    <NavLink href="/register">Register</NavLink>
</div>

@if (!string.IsNullOrEmpty(vm.ErrorMessage))
{
    <div style="color:red">@vm.ErrorMessage</div>
}
@if (vm.Token != null)
{
    <div style="color:green">Login Success! Token: @vm.Token</div>
}

@code {
    private async Task OnLogin()
    {
        await vm.LoginAsync();
    }
}
